{"type":"StackOverflowArtifact","question":{"type":"StackOverflowQuestion","id":8907874,"title":"Problems compiling an Android App with Ant and Proguard","comments":[],"tags":["android","ant","proguard","android-library"],"creationDate":"2012-01-18","lastActivityDate":"2012-01-23","score":0,"viewCount":1141,"owner":{"type":"StackOverflowUser","id":620053,"displayName":"Rafael T","reputation":6541},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>I have an Android App which consists on different modules. The Main module is using some libs like Google's GSON or the v4.support.package. A custom build script with the right proguard.cfg will build it, too. \nNow I must integrate another \"Android-Library\" which uses partly the same libs (GSON support.v4). Beside from getting a lot of Notes like </p>"},"units":[{"type":"TextUnit","id":"[8907874]-[-1638734079]","astNode":{"type":"TextFragmentNode","text":"<p>I have an Android App which consists on different modules. The Main module is using some libs like Google's GSON or the v4.support.package. A custom build script with the right proguard.cfg will build it, too. \nNow I must integrate another \"Android-Library\" which uses partly the same libs (GSON support.v4). Beside from getting a lot of Notes like </p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"support":2,"proguard":1,"custom":1,"googl":1,"build":2,"librari":1,"integr":1,"main":1,"gson":2,"consist":1,"lib":2,"modul":2,"note":1,"cfg":1,"lot":1,"app":1,"part":1,"script":1,"android":2}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<blockquote>\n  <p>Note: duplicate definition of program class [com.google.gson.Gson]</p>\n</blockquote>"},"units":[{"type":"TextUnit","id":"[8907874]-[388805103]","astNode":{"type":"TextFragmentNode","text":"<blockquote>\n  <p>Note: duplicate definition of program class [com.google.gson.Gson]</p>\n</blockquote>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"com","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"google","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"gson","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"Gson","comments":[]},"comments":[]}],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"program":1,"googl":1,"gson":2,"blockquot":2,"note":1,"definit":1,"duplic":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"com","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"google","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"gson","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"Gson","comments":[]},"comments":[]}],"comments":[]}],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"com","comments":[]},{"type":"IdentifierNode","name":"google","comments":[]},{"type":"IdentifierNode","name":"gson","comments":[]},{"type":"IdentifierNode","name":"Gson","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>I get also some Notes like</p>"},"units":[{"type":"TextUnit","id":"[8907874]-[779256213]","astNode":{"type":"TextFragmentNode","text":"<p>I get also some Notes like</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"note":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<blockquote>\n  <p>[proguard] Note: com.google.gson.UnsafeAllocator: can't find dynamically referenced class sun.misc.Unsafe</p>\n  \n  <p>[proguard] Note: the configuration refers to the unknown class 'sun.misc.Unsafe'</p>\n</blockquote>"},"units":[{"type":"TextUnit","id":"[8907874]-[-1780318423]","astNode":{"type":"TextFragmentNode","text":"<blockquote>\n  <p>[proguard] Note: com.google.gson.UnsafeAllocator: can't find dynamically referenced class sun.misc.Unsafe</p>\n  \n  <p>[proguard] Note: the configuration refers to the unknown class 'sun.misc.Unsafe'</p>\n</blockquote>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"com","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"google","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"gson","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"UnsafeAllocator","comments":[]},"comments":[]}],"comments":[]},{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"sun","comments":[]},"labels":[],"comments":[]},{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"sun","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"misc","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"Unsafe","comments":[]},"comments":[]}],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"find":1,"proguard":2,"alloc":1,"googl":1,"sun":2,"dynam":1,"unknown":1,"configur":1,"gson":1,"blockquot":2,"note":2,"refer":1,"misc":2,"unsaf":3,"referenc":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"com","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"google","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"gson","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"UnsafeAllocator","comments":[]},"comments":[]}],"comments":[]},{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"sun","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"misc","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"Unsafe","comments":[]},"comments":[]}],"comments":[]}],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"gson","comments":[]},{"type":"IdentifierNode","name":"sun","comments":[]},{"type":"IdentifierNode","name":"UnsafeAllocator","comments":[]},{"type":"IdentifierNode","name":"Unsafe","comments":[]},{"type":"IdentifierNode","name":"misc","comments":[]},{"type":"IdentifierNode","name":"google","comments":[]},{"type":"IdentifierNode","name":"com","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>that I find strange cause i have some 'keeps' in my Proguard.cfg especially for that:</p>"},"units":[{"type":"TextUnit","id":"[8907874]-[-2076275312]","astNode":{"type":"TextFragmentNode","text":"<p>that I find strange cause i have some 'keeps' in my Proguard.cfg especially for that:</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"strang":1,"proguard":1,"cfg":1,"find":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<blockquote>\n  <p>-keepattributes Signature, <em>Annotation</em></p>\n  \n  <p>-keep class com.google.gson.** {*;}</p>\n  \n  <p>-keep class sun.misc.Unsafe { *; } </p>\n</blockquote>"},"units":[{"type":"TextUnit","id":"[8907874]-[467190934]","astNode":{"type":"TextFragmentNode","text":"<blockquote>\n  <p>-keepattributes Signature, <em>Annotation</em></p>\n  \n  <p>-keep class com.google.gson.** {*;}</p>\n  \n  <p>-keep class sun.misc.Unsafe { *; } </p>\n</blockquote>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"com","comments":[]},"labels":[],"comments":[]},{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"sun","comments":[]},"labels":[],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"googl":1,"signatur":1,"keepattribut":1,"sun":1,"gson":1,"blockquot":2,"annot":1,"misc":1,"unsaf":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"com","comments":[]},{"type":"IdentifierNode","name":"sun","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>which works well on my project without referencing the module-library inside it.\nI'm on the Latest SDK and Tools, and added a custom proguard.cfg to the module-library, which works well on the module-lib itself (if build in standalone-mode).\nIt seems to me, that the build is not depending on custom proguard.cfg inside library-projects. Any idea on what to try highly appreciated</p>"},"units":[{"type":"TextUnit","id":"[8907874]-[-1384038686]","astNode":{"type":"TextFragmentNode","text":"<p>which works well on my project without referencing the module-library inside it.\nI'm on the Latest SDK and Tools, and added a custom proguard.cfg to the module-library, which works well on the module-lib itself (if build in standalone-mode).\nIt seems to me, that the build is not depending on custom proguard.cfg inside library-projects. Any idea on what to try highly appreciated</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"standalon":1,"proguard":2,"custom":2,"depend":1,"appreci":1,"project":2,"tool":1,"idea":1,"sdk":1,"build":2,"librari":3,"work":2,"lib":1,"insid":2,"modul":3,"cfg":2,"mode":1,"ad":1,"latest":1,"referenc":1,"high":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]}]},"answers":[{"type":"StackOverflowAnswer","id":8966369,"questionId":8907874,"comments":[{"type":"StackOverflowComment","id":33890224,"postId":8966369,"creationDate":"2014-03-10","score":1,"isEdited":false,"owner":{"type":"StackOverflowUser","id":206367,"displayName":"t0mm13b","reputation":21894},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"The answer does not make any sense... care to explain? What is &quot;copy the --keeps inside the main App&quot; meaning?"},"units":[{"type":"TextUnit","id":"[8966369-cu33890224]-[1710505480]","astNode":{"type":"TextFragmentNode","text":"The answer does not make any sense... care to explain? What is &quot;copy the --keeps inside the main App&quot; meaning?"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"sens":1,"explain":1,"mean":1,"care":1,"main":1,"insid":1,"make":1,"answer":1,"app":1,"quot":2,"copi":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":95.165,"fleshKincaidGradeLevel":2.4700000000000024,"automatedReadingIndex":2.8810000000000002,"gunningFogIndex":4.0,"smogIndex":3.0,"colemanLiauIndex":5.348999999999997}]}]}]}],"creationDate":"2012-01-23","lastActivityDate":"2012-01-23","score":-1,"isAccepted":true,"owner":{"type":"StackOverflowUser","id":620053,"displayName":"Rafael T","reputation":6541},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>I finally found a solution for it myself:\nwith the last Android Tools (16), every Android-Library gets compiled on its own first.\nSo when the lib has not a \"standart\" build and defines some custom build script including proguard --keeps, and this --keeps are defined on the same Project (excluding Android SDK classes, as thei're not compiled) it leads to an proguard error.\nThe Solution was do remove proguard out of the lib and copy the --keeps inside the main App</p>"},"units":[{"type":"TextUnit","id":"[8966369]-[1516500307]","astNode":{"type":"TextFragmentNode","text":"<p>I finally found a solution for it myself:\nwith the last Android Tools (16), every Android-Library gets compiled on its own first.\nSo when the lib has not a \"standart\" build and defines some custom build script including proguard --keeps, and this --keeps are defined on the same Project (excluding Android SDK classes, as thei're not compiled) it leads to an proguard error.\nThe Solution was do remove proguard out of the lib and copy the --keeps inside the main App</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"lead":1,"remov":1,"proguard":3,"custom":1,"project":1,"tool":1,"sdk":1,"build":2,"librari":1,"standart":1,"main":1,"includ":1,"found":1,"lib":2,"error":1,"insid":1,"app":1,"class":1,"compil":2,"thei":1,"script":1,"defin":2,"solut":2,"copi":1,"exclud":1,"android":3}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]}]}]}