{"type":"StackOverflowArtifact","question":{"type":"StackOverflowQuestion","id":16299763,"title":"Android main thread getting locked in db operation","comments":[],"tags":["android","sqlcipher"],"creationDate":"2013-04-30","lastActivityDate":"2013-08-22","lastEditDate":"2013-04-30","score":2,"viewCount":342,"owner":{"type":"StackOverflowUser","id":862048,"displayName":"Madhusudhan","reputation":131},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>My application uses sqlcipher database. It uses cursor loader to query data from db</p>"},"units":[{"type":"TextUnit","id":"[16299763]-[-178318484]","astNode":{"type":"TextFragmentNode","text":"<p>My application uses sqlcipher database. It uses cursor loader to query data from db</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"sqlcipher":1,"loader":1,"data":1,"cursor":1,"queri":1,"applic":1,"databas":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>I am running into ANR. See below ANR trace</p>"},"units":[{"type":"TextUnit","id":"[16299763]-[-479011292]","astNode":{"type":"TextFragmentNode","text":"<p>I am running into ANR. See below ANR trace</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"run":1,"trace":1,"anr":2}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>What I am trying to understand here is that why would a main thread which is trying to close the cursor get blocked on itself. This issue happens randomly and I have not yet figured out a reproducible scenario. I am doubting if this is locking issue associated with sqlcipher's cursor implementation.</p>"},"units":[{"type":"TextUnit","id":"[16299763]-[-1004478569]","astNode":{"type":"TextFragmentNode","text":"<p>What I am trying to understand here is that why would a main thread which is trying to close the cursor get blocked on itself. This issue happens randomly and I have not yet figured out a reproducible scenario. I am doubting if this is locking issue associated with sqlcipher's cursor implementation.</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"scenario":1,"random":1,"sqlcipher":1,"understand":1,"reproduc":1,"issu":2,"lock":1,"main":1,"cursor":2,"block":1,"thread":1,"doubt":1,"implement":1,"figur":1,"close":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlNode","name":{"type":"XmlNameNode","value":"pre"},"attributes":[],"elements":[{"type":"XmlNode","name":{"type":"XmlNameNode","value":"code"},"attributes":[],"elements":[{"type":"XmlTextNode","contents":"    \"main\" prio=5 tid=1 WAIT\n    | group=\"main\" sCount=1 dsCount=0 obj=0x415979a0 self=0x4000b010\n    | sysTid=9804 nice=0 sched=0/0 cgrp=apps handle=1075102172\n    | state=S schedstat=( 0 0 0 ) utm=3670 stm=710 core=1\n    at java.lang.Object.wait(Native Method)\n\nwaiting on (a java.lang.VMThread) held by tid=1 (main) at\njava.lang.Thread.parkFor(Thread.java:1231) at sun.misc.Unsafe.park(Unsafe.java:323) at \njava.util.concurrent.locks.LockSupport.park(LockSupport.java:159) at \njava.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:810) at \njava.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:843) at\njava.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1173) at\njava.util.concurrent.locks.ReentrantLock$FairSync.lock(ReentrantLock.java:198) at \njava.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:259) at \nnet.sqlcipher.database.SQLiteDatabase.lock(SQLiteDatabase.java:460) at \nnet.sqlcipher.database.SQLiteProgram.close(SQLiteProgram.java:294) at \nnet.sqlcipher.database.SQLiteQuery.close(SQLiteQuery.java:136) at \nnet.sqlcipher.database.SQLiteCursor.close(SQLiteCursor.java:510) at\nandroid.database.CursorWrapper.close(CursorWrapper.java:49) at \nandroid.database.CursorWrapper.close(CursorWrapper.java:49) at \nandroid.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1860) at\nandroid.database.MergeCursor.close(MergeCursor.java:175) at \nandroid.database.CursorWrapper.close(CursorWrapper.java:49) at \nandroid.content.CursorLoader.deliverResult(CursorLoader.java:117) at \nandroid.content.CursorLoader.deliverResult(CursorLoader.java:43)\n"}]}]},"units":[{"type":"StructuredFragmentUnit","id":"[16299763]-[872656076]","astNode":{"type":"CodeFragmentSequence","fragments":[{"type":"TextFragmentNode","text":"    \"main\" prio=5 tid=1 WAIT\n    | group=\"main\" "},{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"sCount","comments":[]}],"comments":[]},{"type":"TextFragmentNode","text":"=1 "},{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"dsCount","comments":[]}],"comments":[]},{"type":"TextFragmentNode","text":"=0 obj=0x415979a0 self=0x4000b010\n    | "},{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"sysTid","comments":[]}],"comments":[]},{"type":"TextFragmentNode","text":"=9804 nice=0 sched=0/0 cgrp=apps handle=1075102172\n    | state=S schedstat=( 0 0 0 ) utm=3670 stm=710 core=1\n    "},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"lang","comments":[]},{"type":"IdentifierNode","name":"Object","comments":[]},{"type":"IdentifierNode","name":"wait","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"Native Method"}},{"type":"TextFragmentNode","text":"waiting on (a "},{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"java","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"lang","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"VMThread","comments":[]},"comments":[]}],"comments":[]},{"type":"TextFragmentNode","text":") held by tid=1 (main) "},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"lang","comments":[]},{"type":"IdentifierNode","name":"Thread","comments":[]},{"type":"IdentifierNode","name":"parkFor","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"Thread.java","lineNumber":1231}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"sun","comments":[]},{"type":"IdentifierNode","name":"misc","comments":[]},{"type":"IdentifierNode","name":"Unsafe","comments":[]},{"type":"IdentifierNode","name":"park","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"Unsafe.java","lineNumber":323}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"util","comments":[]},{"type":"IdentifierNode","name":"concurrent","comments":[]},{"type":"IdentifierNode","name":"locks","comments":[]},{"type":"IdentifierNode","name":"LockSupport","comments":[]},{"type":"IdentifierNode","name":"park","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"LockSupport.java","lineNumber":159}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"util","comments":[]},{"type":"IdentifierNode","name":"concurrent","comments":[]},{"type":"IdentifierNode","name":"locks","comments":[]},{"type":"IdentifierNode","name":"AbstractQueuedSynchronizer","comments":[]},{"type":"IdentifierNode","name":"parkAndCheckInterrupt","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"AbstractQueuedSynchronizer.java","lineNumber":810}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"util","comments":[]},{"type":"IdentifierNode","name":"concurrent","comments":[]},{"type":"IdentifierNode","name":"locks","comments":[]},{"type":"IdentifierNode","name":"AbstractQueuedSynchronizer","comments":[]},{"type":"IdentifierNode","name":"acquireQueued","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"AbstractQueuedSynchronizer.java","lineNumber":843}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"util","comments":[]},{"type":"IdentifierNode","name":"concurrent","comments":[]},{"type":"IdentifierNode","name":"locks","comments":[]},{"type":"IdentifierNode","name":"AbstractQueuedSynchronizer","comments":[]},{"type":"IdentifierNode","name":"acquire","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"AbstractQueuedSynchronizer.java","lineNumber":1173}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"util","comments":[]},{"type":"IdentifierNode","name":"concurrent","comments":[]},{"type":"IdentifierNode","name":"locks","comments":[]},{"type":"IdentifierNode","name":"ReentrantLock$FairSync","comments":[]},{"type":"IdentifierNode","name":"lock","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"ReentrantLock.java","lineNumber":198}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"util","comments":[]},{"type":"IdentifierNode","name":"concurrent","comments":[]},{"type":"IdentifierNode","name":"locks","comments":[]},{"type":"IdentifierNode","name":"ReentrantLock","comments":[]},{"type":"IdentifierNode","name":"lock","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"ReentrantLock.java","lineNumber":259}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"net","comments":[]},{"type":"IdentifierNode","name":"sqlcipher","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"SQLiteDatabase","comments":[]},{"type":"IdentifierNode","name":"lock","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"SQLiteDatabase.java","lineNumber":460}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"net","comments":[]},{"type":"IdentifierNode","name":"sqlcipher","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"SQLiteProgram","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"SQLiteProgram.java","lineNumber":294}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"net","comments":[]},{"type":"IdentifierNode","name":"sqlcipher","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"SQLiteQuery","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"SQLiteQuery.java","lineNumber":136}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"net","comments":[]},{"type":"IdentifierNode","name":"sqlcipher","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"SQLiteCursor","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"SQLiteCursor.java","lineNumber":510}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"CursorWrapper","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"CursorWrapper.java","lineNumber":49}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"CursorWrapper","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"CursorWrapper.java","lineNumber":49}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"content","comments":[]},{"type":"IdentifierNode","name":"ContentResolver$CursorWrapperInner","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"ContentResolver.java","lineNumber":1860}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"MergeCursor","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"MergeCursor.java","lineNumber":175}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"CursorWrapper","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"CursorWrapper.java","lineNumber":49}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"content","comments":[]},{"type":"IdentifierNode","name":"CursorLoader","comments":[]},{"type":"IdentifierNode","name":"deliverResult","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"CursorLoader.java","lineNumber":117}},{"type":"StackTraceLineNode","methodName":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"content","comments":[]},{"type":"IdentifierNode","name":"CursorLoader","comments":[]},{"type":"IdentifierNode","name":"deliverResult","comments":[]}],"comments":[]},"location":{"type":"SourceLocationNode","fileName":"CursorLoader.java","lineNumber":43}}]},"rawText":"    \"main\" prio=5 tid=1 WAIT\n    | group=\"main\" sCount=1 dsCount=0 obj=0x415979a0 self=0x4000b010\n    | sysTid=9804 nice=0 sched=0/0 cgrp=apps handle=1075102172\n    | state=S schedstat=( 0 0 0 ) utm=3670 stm=710 core=1\n    at java.lang.Object.wait(Native Method)\n\nwaiting on (a java.lang.VMThread) held by tid=1 (main) at\njava.lang.Thread.parkFor(Thread.java:1231) at sun.misc.Unsafe.park(Unsafe.java:323) at \njava.util.concurrent.locks.LockSupport.park(LockSupport.java:159) at \njava.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:810) at \njava.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:843) at\njava.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1173) at\njava.util.concurrent.locks.ReentrantLock$FairSync.lock(ReentrantLock.java:198) at \njava.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:259) at \nnet.sqlcipher.database.SQLiteDatabase.lock(SQLiteDatabase.java:460) at \nnet.sqlcipher.database.SQLiteProgram.close(SQLiteProgram.java:294) at \nnet.sqlcipher.database.SQLiteQuery.close(SQLiteQuery.java:136) at \nnet.sqlcipher.database.SQLiteCursor.close(SQLiteCursor.java:510) at\nandroid.database.CursorWrapper.close(CursorWrapper.java:49) at \nandroid.database.CursorWrapper.close(CursorWrapper.java:49) at \nandroid.content.ContentResolver$CursorWrapperInner.close(ContentResolver.java:1860) at\nandroid.database.MergeCursor.close(MergeCursor.java:175) at \nandroid.database.CursorWrapper.close(CursorWrapper.java:49) at \nandroid.content.CursorLoader.deliverResult(CursorLoader.java:117) at \nandroid.content.CursorLoader.deliverResult(CursorLoader.java:43)\n","metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"sqlite":8,"program":2,"support":2,"method":1,"count":2,"resolv":2,"fair":1,"wait":3,"concurr":6,"util":6,"sqlcipher":4,"vmthread":1,"state":1,"loader":4,"result":2,"held":1,"stm":1,"sun":1,"lock":15,"obj":1,"nice":1,"main":3,"reentrant":4,"sys":1,"cursor":15,"net":4,"object":1,"thread":2,"queri":2,"check":1,"utm":1,"schedstat":1,"wrapper":7,"merg":2,"queu":7,"park":4,"sync":1,"content":5,"misc":1,"app":1,"databas":10,"unsaf":2,"deliv":2,"lang":3,"acquir":2,"cgrp":1,"tid":3,"core":1,"close":8,"prio":1,"handl":1,"group":1,"interrupt":1,"sched":1,"android":7,"synchron":6}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"java","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"lang","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"VMThread","comments":[]},"comments":[]}],"comments":[]}],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"dsCount","comments":[]},{"type":"IdentifierNode","name":"Object","comments":[]},{"type":"IdentifierNode","name":"lock","comments":[]},{"type":"IdentifierNode","name":"database","comments":[]},{"type":"IdentifierNode","name":"sun","comments":[]},{"type":"IdentifierNode","name":"parkFor","comments":[]},{"type":"IdentifierNode","name":"acquireQueued","comments":[]},{"type":"IdentifierNode","name":"wait","comments":[]},{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"SQLiteQuery","comments":[]},{"type":"IdentifierNode","name":"ReentrantLock","comments":[]},{"type":"IdentifierNode","name":"parkAndCheckInterrupt","comments":[]},{"type":"IdentifierNode","name":"SQLiteProgram","comments":[]},{"type":"IdentifierNode","name":"android","comments":[]},{"type":"IdentifierNode","name":"content","comments":[]},{"type":"IdentifierNode","name":"CursorWrapper","comments":[]},{"type":"IdentifierNode","name":"net","comments":[]},{"type":"IdentifierNode","name":"util","comments":[]},{"type":"IdentifierNode","name":"sqlcipher","comments":[]},{"type":"IdentifierNode","name":"Unsafe","comments":[]},{"type":"IdentifierNode","name":"lang","comments":[]},{"type":"IdentifierNode","name":"sysTid","comments":[]},{"type":"IdentifierNode","name":"close","comments":[]},{"type":"IdentifierNode","name":"MergeCursor","comments":[]},{"type":"IdentifierNode","name":"deliverResult","comments":[]},{"type":"IdentifierNode","name":"ContentResolver$CursorWrapperInner","comments":[]},{"type":"IdentifierNode","name":"acquire","comments":[]},{"type":"IdentifierNode","name":"Thread","comments":[]},{"type":"IdentifierNode","name":"CursorLoader","comments":[]},{"type":"IdentifierNode","name":"park","comments":[]},{"type":"IdentifierNode","name":"concurrent","comments":[]},{"type":"IdentifierNode","name":"misc","comments":[]},{"type":"IdentifierNode","name":"AbstractQueuedSynchronizer","comments":[]},{"type":"IdentifierNode","name":"LockSupport","comments":[]},{"type":"IdentifierNode","name":"locks","comments":[]},{"type":"IdentifierNode","name":"SQLiteCursor","comments":[]},{"type":"IdentifierNode","name":"VMThread","comments":[]},{"type":"IdentifierNode","name":"SQLiteDatabase","comments":[]},{"type":"IdentifierNode","name":"sCount","comments":[]},{"type":"IdentifierNode","name":"ReentrantLock$FairSync","comments":[]}]},{"declarators":[]},{"grade":0.0}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>I have been trying to debug the issue, but have no idea where to start with</p>"},"units":[{"type":"TextUnit","id":"[16299763]-[390590134]","astNode":{"type":"TextFragmentNode","text":"<p>I have been trying to debug the issue, but have no idea where to start with</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"idea":1,"issu":1,"debug":1,"start":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>can somebody help me</p>"},"units":[{"type":"TextUnit","id":"[16299763]-[1777194664]","astNode":{"type":"TextFragmentNode","text":"<p>can somebody help me</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Positive"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]}]},"answers":[{"type":"StackOverflowAnswer","id":18378581,"questionId":16299763,"comments":[],"creationDate":"2013-08-22","lastActivityDate":"2013-08-22","score":0,"isAccepted":false,"owner":{"type":"StackOverflowUser","id":964994,"displayName":"stack_ved","reputation":461},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>Based on the logs, the only reason I can think of that could have triggered an ANR is:</p>"},"units":[{"type":"TextUnit","id":"[18378581]-[1474890829]","astNode":{"type":"TextFragmentNode","text":"<p>Based on the logs, the only reason I can think of that could have triggered an ANR is:</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"reason":1,"base":1,"anr":1,"log":1,"trigger":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>As far as i know, usually in Java every thread is associated with 2 components. One being Program counter and the other being Garbage Collector. So every thread will have a gc monitor happening throughout. </p>"},"units":[{"type":"TextUnit","id":"[18378581]-[1388585990]","astNode":{"type":"TextFragmentNode","text":"<p>As far as i know, usually in Java every thread is associated with 2 components. One being Program counter and the other being Garbage Collector. So every thread will have a gc monitor happening throughout. </p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"program":1,"monitor":1,"collector":1,"happen":1,"compon":1,"thread":2,"counter":1,"garbag":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p><strong>waiting on (a java.lang.VMThread) held by tid=1 (main) at</strong></p>"},"units":[{"type":"TextUnit","id":"[18378581]-[-1323749633]","astNode":{"type":"TextFragmentNode","text":"<p><strong>waiting on (a java.lang.VMThread) held by tid=1 (main) at</strong></p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"java","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"lang","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"VMThread","comments":[]},"comments":[]}],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"wait":1,"vmthread":1,"held":1,"strong":2,"main":1,"lang":1,"tid":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"java","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"lang","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"VMThread","comments":[]},"comments":[]}],"comments":[]}],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"lang","comments":[]},{"type":"IdentifierNode","name":"VMThread","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>VMThreads are ideally used to handle this aspect of monitoring gc, almost parallelly. So what i could think of, for your scenario, is SQLiteDatabase is trying to acquire a lock but is unable to because VMThread is holding the lock, unreleased yet (may be due to some major GC op), thus waiting for vmthread to release the lock. </p>"},"units":[{"type":"TextUnit","id":"[18378581]-[96856544]","astNode":{"type":"TextFragmentNode","text":"<p>VMThreads are ideally used to handle this aspect of monitoring gc, almost parallelly. So what i could think of, for your scenario, is SQLiteDatabase is trying to acquire a lock but is unable to because VMThread is holding the lock, unreleased yet (may be due to some major GC op), thus waiting for vmthread to release the lock. </p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"SQLiteDatabase","comments":[]},"comments":[]}],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"scenario":1,"sqlite":1,"monitor":1,"due":1,"wait":1,"ideal":1,"vmthread":3,"aspect":1,"lock":3,"parallelli":1,"unreleas":1,"hold":1,"releas":1,"databas":1,"acquir":1,"unabl":1,"major":1,"handl":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"SQLiteDatabase","comments":[]},"comments":[]}],"comments":[]}],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"SQLiteDatabase","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>You might want to check your main log dump which has gc activities logged, that might give you a better picture as to why gc was hogging this threads CPU time so much and then app profiling may help.\nJus check.</p>"},"units":[{"type":"TextUnit","id":"[18378581]-[1719554858]","astNode":{"type":"TextFragmentNode","text":"<p>You might want to check your main log dump which has gc activities logged, that might give you a better picture as to why gc was hogging this threads CPU time so much and then app profiling may help.\nJus check.</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"profil":1,"jus":1,"dump":1,"main":1,"thread":1,"activ":1,"check":2,"cpu":1,"give":1,"app":1,"time":1,"pictur":1,"hog":1,"log":2}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]}]}]}