{
  "type":"StackOverflowArtifact",
  "question":{
    "type":"StackOverflowQuestion",
    "id":24818823,
    "title":"Java huge Performance difference with same test",
    "comments":[
      {
        "type":"StackOverflowComment",
        "id":38530182,
        "postId":24818823,
        "creationDate":"2014-07-18",
        "score":0,
        "isEdited":false,
        "owner":{
          "type":"StackOverflowUser",
          "id":3121703,
          "displayName":"Nachiket Kate",
          "reputation":3116
        },
        "source":[
          {
            "type":"SourceInfo",
            "node":{
              "type":"XmlTextNode",
              "contents":"it can be because of caching"
            },
            "units":[
              {
                "type":"TextUnit",
                "id":"[24818823-cu38530182]-[-1402628920]",
                "astNode":{
                  "type":"TextFragmentNode",
                  "text":"it can be because of caching"
                },
                "codeFragments":{
                  "type":"CodeFragmentSequence",
                  "fragments":[
                    
                  ]
                },
                "metaInformation":[
                  {
                    "type":"NaturalLanguageMetaInformation",
                    "tfMap":{
                      "cach":1
                    }
                  },
                  {
                    "type":"CodeTypesMetaInformation",
                    "qualifiedTypes":[
                      
                    ],
                    "simpleTypes":[
                      
                    ],
                    "basicTypes":[
                      
                    ]
                  },
                  {
                    "type":"CodeInvocationMetaInformation",
                    "invocations":[
                      
                    ]
                  },
                  {
                    "type":"CodeVariablesMetaInformation",
                    "variables":[
                      
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"StackOverflowComment",
        "id":38530647,
        "postId":24818823,
        "creationDate":"2014-07-18",
        "score":0,
        "isEdited":false,
        "owner":{
          "type":"StackOverflowUser",
          "id":3851831,
          "displayName":"CalibeR.50",
          "reputation":98
        },
        "source":[
          {
            "type":"SourceInfo",
            "node":{
              "type":"XmlTextNode",
              "contents":"@Nachiket but why should the performance be different over 8 hours?"
            },
            "units":[
              {
                "type":"TextUnit",
                "id":"[24818823-cu38530647]-[1881099582]",
                "astNode":{
                  "type":"TextFragmentNode",
                  "text":"@Nachiket but why should the performance be different over 8 hours?"
                },
                "codeFragments":{
                  "type":"CodeFragmentSequence",
                  "fragments":[
                    {
                      "type":"AnnotationNode",
                      "identifier":{
                        "type":"QualifiedIdentifierNode",
                        "identifiers":[
                          {
                            "type":"IdentifierNode",
                            "name":"Nachiket",
                            "comments":[
                              
                            ]
                          }
                        ],
                        "comments":[
                          
                        ]
                      },
                      "comments":[
                        
                      ]
                    }
                  ]
                },
                "metaInformation":[
                  {
                    "type":"NaturalLanguageMetaInformation",
                    "tfMap":{
                      "nachiket":1,
                      "hour":1,
                      "perform":1
                    }
                  },
                  {
                    "type":"CodeTypesMetaInformation",
                    "qualifiedTypes":[
                      
                    ],
                    "simpleTypes":[
                      
                    ],
                    "basicTypes":[
                      
                    ]
                  },
                  {
                    "type":"CodeInvocationMetaInformation",
                    "invocations":[
                      
                    ]
                  },
                  {
                    "type":"CodeVariablesMetaInformation",
                    "variables":[
                      
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "tags":[
      "java",
      "multithreading",
      "performance",
      "testing"
    ],
    "creationDate":"2014-07-18",
    "lastActivityDate":"2014-07-18",
    "score":0,
    "viewCount":53,
    "owner":{
      "type":"StackOverflowUser",
      "id":3851831,
      "displayName":"CalibeR.50",
      "reputation":98
    },
    "source":[
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<p>I wrote a program in Java and made a test for it, which tests the program a few billion times with different test data. The program itself only does calculation and is working with strings (I can't provide the source code, sorry). To speed things up, it uses a thread pool with 15 threads on a 8 Core CPU with 16 threads, where it takes up to 12 hours to finish.</p>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[24818823]-[-510357460]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<p>I wrote a program in Java and made a test for it, which tests the program a few billion times with different test data. The program itself only does calculation and is working with strings (I can't provide the source code, sorry). To speed things up, it uses a thread pool with 15 threads on a 8 Core CPU with 16 threads, where it takes up to 12 hours to finish.</p>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "program":3,
                  "provid":1,
                  "test":3,
                  "data":1,
                  "wrote":1,
                  "thing":1,
                  "calcul":1,
                  "string":1,
                  "finish":1,
                  "work":1,
                  "hour":1,
                  "code":1,
                  "thread":3,
                  "billion":1,
                  "take":1,
                  "cpu":1,
                  "pool":1,
                  "time":1,
                  "core":1,
                  "made":1,
                  "sourc":1,
                  "speed":1
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<p>The problem is, the performance of the whole test differs from start to start. After a little warmup, I normally get 3 millions tests per second, but sometimes only 2 million tests per second. This performance difference stays for the whole test time (8-12 hours), so it has nothing to do with the JIT. If I cancel a slow test and run it again with the exact same command line, there is a good chance it is faster the second try. So far I noticed a difference of up to 50% from start to start.</p>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[24818823]-[-1432421675]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<p>The problem is, the performance of the whole test differs from start to start. After a little warmup, I normally get 3 millions tests per second, but sometimes only 2 million tests per second. This performance difference stays for the whole test time (8-12 hours), so it has nothing to do with the JIT. If I cancel a slow test and run it again with the exact same command line, there is a good chance it is faster the second try. So far I noticed a difference of up to 50% from start to start.</p>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "jit":1,
                  "warmup":1,
                  "cancel":1,
                  "test":5,
                  "faster":1,
                  "slow":1,
                  "line":1,
                  "good":1,
                  "problem":1,
                  "differ":3,
                  "run":1,
                  "command":1,
                  "hour":1,
                  "exact":1,
                  "perform":2,
                  "notic":1,
                  "stay":1,
                  "time":1,
                  "million":2,
                  "start":4,
                  "chanc":1
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<p>Am I doing something completely wrong or what could be the cause?</p>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[24818823]-[-1428438968]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<p>Am I doing something completely wrong or what could be the cause?</p>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "wrong":1,
                  "complet":1
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  "answers":[
    {
      "type":"StackOverflowAnswer",
      "id":24818964,
      "questionId":24818823,
      "comments":[
        {
          "type":"StackOverflowComment",
          "id":38528605,
          "postId":24818964,
          "creationDate":"2014-07-18",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":3851831,
            "displayName":"CalibeR.50",
            "reputation":98
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"It is an encoder and decoder. I can't really tell much about the algorithm, I only translated it from C to Java and wrote a complete test for it (encode something, decode the result, check if decoded equals input). It is working with polynomial calculation. But why should the exact same algorithm be 50% slower or faster randomly over the time of the whole test? CPU usage is always the same."
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[24818964-cu38528605]-[-1268825826]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"It is an encoder and decoder. I can't really tell much about the algorithm, I only translated it from C to Java and wrote a complete test for it (encode something, decode the result, check if decoded equals input). It is working with polynomial calculation. But why should the exact same algorithm be 50% slower or faster randomly over the time of the whole test? CPU usage is always the same."
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "test":2,
                        "random":1,
                        "faster":1,
                        "result":1,
                        "wrote":1,
                        "calcul":1,
                        "work":1,
                        "exact":1,
                        "encod":2,
                        "equal":1,
                        "algorithm":2,
                        "check":1,
                        "slower":1,
                        "translat":1,
                        "cpu":1,
                        "usag":1,
                        "decod":3,
                        "polynomi":1,
                        "complet":1,
                        "time":1,
                        "input":1
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "creationDate":"2014-07-18",
      "lastActivityDate":"2014-07-18",
      "score":0,
      "isAccepted":false,
      "owner":{
        "type":"StackOverflowUser",
        "id":2095321,
        "displayName":"Mateva",
        "reputation":142
      },
      "source":[
        {
          "type":"SourceInfo",
          "node":{
            "type":"XmlTextNode",
            "contents":"<p>It very much depends on the complexity of the algorithm you use. I understand you cannot post the code, but can you mention a famous algorithm used in it?</p>"
          },
          "units":[
            {
              "type":"TextUnit",
              "id":"[24818964]-[-693174723]",
              "astNode":{
                "type":"TextFragmentNode",
                "text":"<p>It very much depends on the complexity of the algorithm you use. I understand you cannot post the code, but can you mention a famous algorithm used in it?</p>"
              },
              "codeFragments":{
                "type":"CodeFragmentSequence",
                "fragments":[
                  
                ]
              },
              "metaInformation":[
                {
                  "type":"NaturalLanguageMetaInformation",
                  "tfMap":{
                    "post":1,
                    "depend":1,
                    "understand":1,
                    "code":1,
                    "mention":1,
                    "algorithm":2,
                    "famous":1,
                    "complex":1
                  }
                },
                {
                  "type":"CodeTypesMetaInformation",
                  "qualifiedTypes":[
                    
                  ],
                  "simpleTypes":[
                    
                  ],
                  "basicTypes":[
                    
                  ]
                },
                {
                  "type":"CodeInvocationMetaInformation",
                  "invocations":[
                    
                  ]
                },
                {
                  "type":"CodeVariablesMetaInformation",
                  "variables":[
                    
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}