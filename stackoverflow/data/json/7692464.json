{"type":"StackOverflowArtifact","question":{"type":"StackOverflowQuestion","id":7692464,"title":"Hibernate Search in a Clustered Configuration?","comments":[],"tags":["java","hibernate","tomcat","cluster-computing","hibernate-search"],"creationDate":"2011-10-07","lastActivityDate":"2011-10-07","lastEditDate":"2011-10-07","score":4,"viewCount":1584,"owner":{"type":"StackOverflowUser","id":331747,"displayName":"Shadowman","reputation":289},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>I have a Java web app that I'm developing, using JBoss Seam as the application framework.  I'd like to take advantage of Hibernate Search to provide entity searching capabilities.  The integration has gone fine, and I'm getting closer to deployment.  The setup for the app in production will be:</p>"},"units":[{"type":"TextUnit","id":"[7692464]-[1604605347]","astNode":{"type":"TextFragmentNode","text":"<p>I have a Java web app that I'm developing, using JBoss Seam as the application framework.  I'd like to take advantage of Hibernate Search to provide entity searching capabilities.  The integration has gone fine, and I'm getting closer to deployment.  The setup for the app in production will be:</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"provid":1,"capabl":1,"hibern":1,"closer":1,"integr":1,"framework":1,"web":1,"jboss":1,"advantag":1,"seam":1,"applic":1,"deploy":1,"app":2,"entiti":1,"fine":1,"develop":1,"setup":1,"product":1,"search":2}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<ul>\n<li>2 (or more) Tomcat app servers, load balanced</li>\n<li>PostgreSQL database on the backend</li>\n</ul>"},"units":[{"type":"TextUnit","id":"[7692464]-[-483641836]","astNode":{"type":"TextFragmentNode","text":"<ul>\n<li>2 (or more) Tomcat app servers, load balanced</li>\n<li>PostgreSQL database on the backend</li>\n</ul>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"balanc":1,"sql":1,"server":1,"postgr":1,"load":1,"backend":1,"app":1,"tomcat":1,"databas":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>My question is, how can I configure Hibernate Search so that the local Lucene indices are updated on App Server #2 when an entity is persisted on App Server #1, and vice versa?  Does Hibernate Search have any sort of clustered-configuration support?  The setup would have to be somewhat master-master since the persist could occur on either of the load-balanced app servers.</p>"},"units":[{"type":"TextUnit","id":"[7692464]-[-602782943]","astNode":{"type":"TextFragmentNode","text":"<p>My question is, how can I configure Hibernate Search so that the local Lucene indices are updated on App Server #2 when an entity is persisted on App Server #1, and vice versa?  Does Hibernate Search have any sort of clustered-configuration support?  The setup would have to be somewhat master-master since the persist could occur on either of the load-balanced app servers.</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"balanc":1,"support":1,"question":1,"lucen":1,"server":3,"master":2,"hibern":2,"occur":1,"updat":1,"local":1,"load":1,"configur":2,"vice":1,"cluster":1,"persist":2,"indic":1,"versa":1,"app":3,"entiti":1,"sort":1,"setup":1,"search":2}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>Does anyone have any recommendations on how to tackle this?  Thanks for your help in advance!</p>"},"units":[{"type":"TextUnit","id":"[7692464]-[1939044679]","astNode":{"type":"TextFragmentNode","text":"<p>Does anyone have any recommendations on how to tackle this?  Thanks for your help in advance!</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"advanc":1,"recommend":1,"tackl":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]}]},"answers":[{"type":"StackOverflowAnswer","id":7692701,"questionId":7692464,"comments":[{"type":"StackOverflowComment","id":9359272,"postId":7692701,"creationDate":"2011-10-08","score":0,"isEdited":false,"owner":{"type":"StackOverflowUser","id":571271,"displayName":"jeha","reputation":5538},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"@Shadowman: Right, as Tomcat is just a servlet container it comes without a JMS broker. So you have to care about this issue yourself. When using Spring you can quite easily embed e.g. an ActiveMQ broker inside you app / war file. Or make the broker an extra structural compontent which can be integrated with Tomcat using JNDI easily as well. For JGroups you just need a proper configuration (and the jar's) (see ref guide again)."},"units":[{"type":"TextUnit","id":"[7692701-cu9359272]-[-1052349777]","astNode":{"type":"TextFragmentNode","text":"@Shadowman: Right, as Tomcat is just a servlet container it comes without a JMS broker. So you have to care about this issue yourself. When using Spring you can quite easily embed e.g. an ActiveMQ broker inside you app / war file. Or make the broker an extra structural compontent which can be integrated with Tomcat using JNDI easily as well. For JGroups you just need a proper configuration (and the jar's) (see ref guide again)."},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"AnnotationNode","identifier":{"type":"QualifiedIdentifierNode","identifiers":[{"type":"IdentifierNode","name":"Shadowman","comments":[]}],"comments":[]},"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"jms":1,"guid":1,"proper":1,"war":1,"compont":1,"spring":1,"issu":1,"ref":1,"servlet":1,"care":1,"contain":1,"integr":1,"configur":1,"structur":1,"easili":2,"broker":3,"activ":1,"insid":1,"shadowman":1,"make":1,"app":1,"extra":1,"file":1,"tomcat":2,"jndi":1,"jgroup":1,"jar":1,"emb":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"Shadowman","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":62.280684210526346,"fleshKincaidGradeLevel":8.348526315789478,"automatedReadingIndex":7.4889473684210515,"gunningFogIndex":7.132631578947368,"smogIndex":6.464101615137754,"colemanLiauIndex":8.88631578947368}]}]}]},{"type":"StackOverflowComment","id":9355019,"postId":7692701,"creationDate":"2011-10-08","score":0,"isEdited":false,"owner":{"type":"StackOverflowUser","id":331747,"displayName":"Shadowman","reputation":289},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"So, are there ways to leverage JMS or JGroups when running Tomcat? I know JMS is provided with JBoss out of the box, but we will be deploying the application under Tomcat."},"units":[{"type":"TextUnit","id":"[7692701-cu9355019]-[1009625834]","astNode":{"type":"TextFragmentNode","text":"So, are there ways to leverage JMS or JGroups when running Tomcat? I know JMS is provided with JBoss out of the box, but we will be deploying the application under Tomcat."},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"provid":1,"jms":2,"leverag":1,"run":1,"way":1,"jboss":1,"applic":1,"deploy":1,"tomcat":2,"box":1,"jgroup":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":74.27000000000001,"fleshKincaidGradeLevel":6.8750000000000036,"automatedReadingIndex":6.587499999999999,"gunningFogIndex":7.65,"smogIndex":6.872983346207417,"colemanLiauIndex":7.357499999999998}]}]}]}],"creationDate":"2011-10-07","lastActivityDate":"2011-10-07","score":4,"isAccepted":true,"owner":{"type":"StackOverflowUser","id":571271,"displayName":"jeha","reputation":5538},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>As describe in the <a href=\"http://www.hibernate.org/subprojects/search/docs\" rel=\"nofollow\">reference documentation</a> there are several back end types:</p>"},"units":[{"type":"TextUnit","id":"[7692701]-[-1497658294]","astNode":{"type":"TextFragmentNode","text":"<p>As describe in the <a href=\"http://www.hibernate.org/subprojects/search/docs\" rel=\"nofollow\">reference documentation</a> there are several back end types:</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"document":1,"hibern":1,"rel":1,"doc":1,"nofollow":1,"back":1,"refer":1,"subproject":1,"end":1,"type":1,"org":1,"href":1,"http":1,"describ":1,"www":1,"search":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<ul>\n<li>Lucene for non-clustered and</li>\n<li>JMS or JGroups for clustered environments (sections 3.6. / 3.7), see this nice illustration from the docs:</li>\n</ul>"},"units":[{"type":"TextUnit","id":"[7692701]-[1454398942]","astNode":{"type":"TextFragmentNode","text":"<ul>\n<li>Lucene for non-clustered and</li>\n<li>JMS or JGroups for clustered environments (sections 3.6. / 3.7), see this nice illustration from the docs:</li>\n</ul>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"lucen":1,"jms":1,"nice":1,"illustr":1,"section":1,"doc":1,"cluster":2,"jgroup":1,"environ":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p><img src=\"http://i.stack.imgur.com/XhCZW.png\" alt=\"enter image description here\"></p>"},"units":[{"type":"TextUnit","id":"[7692701]-[1309333730]","astNode":{"type":"TextFragmentNode","text":"<p><img src=\"http://i.stack.imgur.com/XhCZW.png\" alt=\"enter image description here\"></p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"imgur":1,"descript":1,"czw":1,"png":1,"img":1,"enter":1,"alt":1,"src":1,"stack":1,"http":1,"imag":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>There might be a way to use Terracotta, at least <a href=\"http://stackoverflow.com/questions/885867/teracotta-and-hibernate-search/893486#893486\">this post</a> gives pointers in this direction (I don't know if it works well or even at all).</p>"},"units":[{"type":"TextUnit","id":"[7692701]-[1623828767]","astNode":{"type":"TextFragmentNode","text":"<p>There might be a way to use Terracotta, at least <a href=\"http://stackoverflow.com/questions/885867/teracotta-and-hibernate-search/893486#893486\">this post</a> gives pointers in this direction (I don't know if it works well or even at all).</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"terracotta":1,"question":1,"post":1,"pointer":1,"hibern":1,"work":1,"direct":1,"stackoverflow":1,"href":1,"http":1,"teracotta":1,"search":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]}]}]}