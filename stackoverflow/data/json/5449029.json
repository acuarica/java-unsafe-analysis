{
  "type":"StackOverflowArtifact",
  "question":{
    "type":"StackOverflowQuestion",
    "id":5449029,
    "title":"Loading 32 or 64 bit JNI Library in Java",
    "comments":[
      {
        "type":"StackOverflowComment",
        "id":6173384,
        "postId":5449029,
        "creationDate":"2011-03-27",
        "score":0,
        "isEdited":false,
        "owner":{
          "type":"StackOverflowUser",
          "id":616618,
          "displayName":"katsharp",
          "reputation":2104
        },
        "source":[
          {
            "type":"SourceInfo",
            "node":{
              "type":"XmlTextNode",
              "contents":"How're you bundling your application? In OSGi you have the ability to only load certain bundles or bundle fragments depending on the os architecture. This is how platform-specific functionality is delivered. Could you consider using OSGi?"
            },
            "units":[
              {
                "type":"TextUnit",
                "id":"[5449029-cu6173384]-[-1090947227]",
                "astNode":{
                  "type":"TextFragmentNode",
                  "text":"How're you bundling your application? In OSGi you have the ability to only load certain bundles or bundle fragments depending on the os architecture. This is how platform-specific functionality is delivered. Could you consider using OSGi?"
                },
                "codeFragments":{
                  "type":"CodeFragmentSequence",
                  "fragments":[
                    
                  ]
                },
                "metaInformation":[
                  {
                    "type":"NaturalLanguageMetaInformation",
                    "tfMap":{
                      "depend":1,
                      "fragment":1,
                      "load":1,
                      "bundl":3,
                      "function":1,
                      "specif":1,
                      "architectur":1,
                      "applic":1,
                      "abil":1,
                      "deliv":1,
                      "platform":1,
                      "osgi":2
                    }
                  },
                  {
                    "type":"CodeTypesMetaInformation",
                    "qualifiedTypes":[
                      
                    ],
                    "simpleTypes":[
                      
                    ],
                    "basicTypes":[
                      
                    ]
                  },
                  {
                    "type":"CodeInvocationMetaInformation",
                    "invocations":[
                      
                    ]
                  },
                  {
                    "type":"CodeVariablesMetaInformation",
                    "variables":[
                      
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"StackOverflowComment",
        "id":6174326,
        "postId":5449029,
        "creationDate":"2011-03-27",
        "score":0,
        "isEdited":false,
        "owner":{
          "type":"StackOverflowUser",
          "id":554431,
          "displayName":"bestsss",
          "reputation":6866
        },
        "source":[
          {
            "type":"SourceInfo",
            "node":{
              "type":"XmlTextNode",
              "contents":"Your main concern is NOT what OS is but what the executable is: you can run 32bit executable on 64bit OS but then it is still 32bits and the libraries you need are 32bit not 64. If hypothetically you can run a 64bit executable on some 32bit OS, you need 64bit libraries. This is what przemelek tries to explain. `os.arch` will be good enough for practically anything as long as it is present, my answer was targeting cases when Unsafe will be there but some system property may not."
            },
            "units":[
              {
                "type":"TextUnit",
                "id":"[5449029-cu6174326]-[-1092551416]",
                "astNode":{
                  "type":"TextFragmentNode",
                  "text":"Your main concern is NOT what OS is but what the executable is: you can run 32bit executable on 64bit OS but then it is still 32bits and the libraries you need are 32bit not 64. If hypothetically you can run a 64bit executable on some 32bit OS, you need 64bit libraries. This is what przemelek tries to explain. `os.arch` will be good enough for practically anything as long as it is present, my answer was targeting cases when Unsafe will be there but some system property may not."
                },
                "codeFragments":{
                  "type":"CodeFragmentSequence",
                  "fragments":[
                    
                  ]
                },
                "metaInformation":[
                  {
                    "type":"NaturalLanguageMetaInformation",
                    "tfMap":{
                      "properti":1,
                      "przemelek":1,
                      "bit":7,
                      "system":1,
                      "hypothet":1,
                      "explain":1,
                      "good":1,
                      "present":1,
                      "run":2,
                      "librari":2,
                      "main":1,
                      "concern":1,
                      "arch":1,
                      "answer":1,
                      "target":1,
                      "unsaf":1,
                      "case":1,
                      "practic":1,
                      "execut":3
                    }
                  },
                  {
                    "type":"CodeTypesMetaInformation",
                    "qualifiedTypes":[
                      
                    ],
                    "simpleTypes":[
                      
                    ],
                    "basicTypes":[
                      
                    ]
                  },
                  {
                    "type":"CodeInvocationMetaInformation",
                    "invocations":[
                      
                    ]
                  },
                  {
                    "type":"CodeVariablesMetaInformation",
                    "variables":[
                      
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ],
    "tags":[
      "java",
      "jni"
    ],
    "creationDate":"2011-03-27",
    "lastActivityDate":"2011-12-28",
    "closedDate":"2011-12-29",
    "score":1,
    "viewCount":4483,
    "owner":{
      "type":"StackOverflowUser",
      "id":274473,
      "displayName":"kayahr",
      "reputation":4909
    },
    "source":[
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<blockquote> \n <p><strong>Possible Duplicate:</strong><br /> <a href=\"http://stackoverflow.com/questions/5379589/java-switching-between-dll-depends-on-system-architecture-32-64\">Java : switching between dll depends on system architecture (32/64)</a> </p> \n</blockquote>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[5449029]-[2077826551]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<blockquote> \n <p><strong>Possible Duplicate:</strong><br /> <a href=\"http://stackoverflow.com/questions/5379589/java-switching-between-dll-depends-on-system-architecture-32-64\">Java : switching between dll depends on system architecture (32/64)</a> </p> \n</blockquote>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "question":1,
                  "switch":2,
                  "system":2,
                  "depend":2,
                  "strong":2,
                  "blockquot":2,
                  "stackoverflow":1,
                  "architectur":2,
                  "duplic":1,
                  "href":1,
                  "http":1,
                  "dll":2
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<p>In my Java application I need a JNI library which is available for 32 bit and 64 bit. I don't want to ship two different versions of my application so I want to ship the application with both libraries and the application must determine itself which library to load (foobar32.so or foobar64.so). How do I do that?</p>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[5449029]-[570938539]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<p>In my Java application I need a JNI library which is available for 32 bit and 64 bit. I don't want to ship two different versions of my application so I want to ship the application with both libraries and the application must determine itself which library to load (foobar32.so or foobar64.so). How do I do that?</p>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "determin":1,
                  "bit":2,
                  "load":1,
                  "librari":3,
                  "jni":1,
                  "version":1,
                  "ship":2,
                  "applic":4,
                  "foobar":2
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<p>I thought about trying to load the first one and if this throws an exception then I load the second one but this sounds ugly.</p>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[5449029]-[169027749]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<p>I thought about trying to load the first one and if this throws an exception then I load the second one but this sounds ugly.</p>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "ugli":1,
                  "sound":1,
                  "load":2,
                  "thought":1
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<p>Is there some system property I could check instead to determine if a 32 bit Java or a 64 bit Java is used to run my application? I know there is some <code>os.arch</code> property but the return value seems to be pretty unpredictable according to <a href=\"http://stackoverflow.com/questions/807263/how-do-i-detect-which-kind-of-jre-is-installed-32bit-vs-64bit\">this answer</a>.</p>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[5449029]-[10544207]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<p>Is there some system property I could check instead to determine if a 32 bit Java or a 64 bit Java is used to run my application? I know there is some <code>os.arch</code> property but the return value seems to be pretty unpredictable according to <a href=\"http://stackoverflow.com/questions/807263/how-do-i-detect-which-kind-of-jre-is-installed-32bit-vs-64bit\">this answer</a>.</p>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "jre":1,
                  "properti":2,
                  "question":1,
                  "determin":1,
                  "bit":4,
                  "system":1,
                  "detect":1,
                  "unpredict":1,
                  "run":1,
                  "pretti":1,
                  "code":2,
                  "stackoverflow":1,
                  "check":1,
                  "instal":1,
                  "applic":1,
                  "arch":1,
                  "answer":1,
                  "kind":1,
                  "href":1,
                  "http":1
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      },
      {
        "type":"SourceInfo",
        "node":{
          "type":"XmlTextNode",
          "contents":"<p>So what is the best way to let the application decide if to load the 32 or 64 bit JNI library?</p>"
        },
        "units":[
          {
            "type":"TextUnit",
            "id":"[5449029]-[-1773074645]",
            "astNode":{
              "type":"TextFragmentNode",
              "text":"<p>So what is the best way to let the application decide if to load the 32 or 64 bit JNI library?</p>"
            },
            "codeFragments":{
              "type":"CodeFragmentSequence",
              "fragments":[
                
              ]
            },
            "metaInformation":[
              {
                "type":"NaturalLanguageMetaInformation",
                "tfMap":{
                  "decid":1,
                  "bit":1,
                  "load":1,
                  "librari":1,
                  "jni":1,
                  "applic":1
                }
              },
              {
                "type":"CodeTypesMetaInformation",
                "qualifiedTypes":[
                  
                ],
                "simpleTypes":[
                  
                ],
                "basicTypes":[
                  
                ]
              },
              {
                "type":"CodeInvocationMetaInformation",
                "invocations":[
                  
                ]
              },
              {
                "type":"CodeVariablesMetaInformation",
                "variables":[
                  
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  "answers":[
    {
      "type":"StackOverflowAnswer",
      "id":5449069,
      "questionId":5449029,
      "comments":[
        {
          "type":"StackOverflowComment",
          "id":6173791,
          "postId":5449069,
          "creationDate":"2011-03-27",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":464988,
            "displayName":"MByD",
            "reputation":81749
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"@przemelek - the `os.arch` is unreliable because it returns the properties of the system used for compiling the jar, not the system that it runs on (see link in my answer)"
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449069-cu6173791]-[1427676696]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"@przemelek - the `os.arch` is unreliable because it returns the properties of the system used for compiling the jar, not the system that it runs on (see link in my answer)"
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "properti":1,
                        "przemelek":1,
                        "unreli":1,
                        "system":2,
                        "return":1,
                        "run":1,
                        "link":1,
                        "arch":1,
                        "answer":1,
                        "compil":1,
                        "jar":1
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"StackOverflowComment",
          "id":6173819,
          "postId":5449069,
          "creationDate":"2011-03-27",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":549641,
            "displayName":"jmg",
            "reputation":4346
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"@MByD: No, the system property `os.arch` --- as all Java system properties --- is a runtime concept, not a compile time concept. Therefore, it returns the runtime architecture."
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449069-cu6173819]-[-1744880080]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"@MByD: No, the system property `os.arch` --- as all Java system properties --- is a runtime concept, not a compile time concept. Therefore, it returns the runtime architecture."
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      {
                        "type":"AnnotationNode",
                        "identifier":{
                          "type":"QualifiedIdentifierNode",
                          "identifiers":[
                            {
                              "type":"IdentifierNode",
                              "name":"MByD",
                              "comments":[
                                
                              ]
                            }
                          ],
                          "comments":[
                            
                          ]
                        },
                        "comments":[
                          
                        ]
                      }
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "properti":2,
                        "runtim":2,
                        "system":2,
                        "return":1,
                        "mbi":1,
                        "architectur":1,
                        "arch":1,
                        "concept":2,
                        "compil":1,
                        "time":1
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"StackOverflowComment",
          "id":6173856,
          "postId":5449069,
          "creationDate":"2011-03-27",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":464988,
            "displayName":"MByD",
            "reputation":81749
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"@jmg. I made a mistake. the return value from the `os.arch` is runtime value, but it is dependent on the bitness of the JRE, not the actual architecture, so if you have a 32bit JRE running on 64bit windows machine, you will get `x86` as a result. see this post: http://mark.koli.ch/2009/10/javas-osarch-system-property-is-the-bitness-of-the-jre-not-the-operating-system.html"
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449069-cu6173856]-[556436460]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"@jmg. I made a mistake. the return value from the `os.arch` is runtime value, but it is dependent on the bitness of the JRE, not the actual architecture, so if you have a 32bit JRE running on 64bit windows machine, you will get `x86` as a result. see this post: http://mark.koli.ch/2009/10/javas-osarch-system-property-is-the-bitness-of-the-jre-not-the-operating-system.html"
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "jre":3,
                        "properti":1,
                        "post":1,
                        "window":1,
                        "runtim":1,
                        "jmg":1,
                        "bit":4,
                        "system":2,
                        "depend":1,
                        "osarch":1,
                        "koli":1,
                        "run":1,
                        "result":1,
                        "java":1,
                        "oper":1,
                        "mistak":1,
                        "machin":1,
                        "architectur":1,
                        "arch":1,
                        "html":1,
                        "mark":1,
                        "actual":1,
                        "http":1,
                        "made":1
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"StackOverflowComment",
          "id":6173934,
          "postId":5449069,
          "creationDate":"2011-03-27",
          "score":4,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":549641,
            "displayName":"jmg",
            "reputation":4346
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"@MByD: Ok, you're right in that. But, the &quot;bitness&quot; or the architecture of the running JVM is exactly what the OP needs to decide which library to load."
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449069-cu6173934]-[131017319]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"@MByD: Ok, you're right in that. But, the &quot;bitness&quot; or the architecture of the running JVM is exactly what the OP needs to decide which library to load."
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      {
                        "type":"AnnotationNode",
                        "identifier":{
                          "type":"QualifiedIdentifierNode",
                          "identifiers":[
                            {
                              "type":"IdentifierNode",
                              "name":"MByD",
                              "comments":[
                                
                              ]
                            }
                          ],
                          "comments":[
                            
                          ]
                        },
                        "comments":[
                          
                        ]
                      }
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "decid":1,
                        "jvm":1,
                        "bit":1,
                        "run":1,
                        "mbi":1,
                        "load":1,
                        "librari":1,
                        "architectur":1,
                        "quot":2
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"StackOverflowComment",
          "id":6173984,
          "postId":5449069,
          "creationDate":"2011-03-27",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":464988,
            "displayName":"MByD",
            "reputation":81749
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"+1 @jmg, actually, you are right as well, and taught me important thing that was unclear to me. thanks."
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449069-cu6173984]-[-673654392]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"+1 @jmg, actually, you are right as well, and taught me important thing that was unclear to me. thanks."
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "jmg":1,
                        "thing":1,
                        "unclear":1,
                        "import":1,
                        "taught":1
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"StackOverflowComment",
          "id":6174021,
          "postId":5449069,
          "creationDate":"2011-03-27",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":238264,
            "displayName":"przemelek",
            "reputation":66
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"Exactly, os.arch returns this in which mode is CPU executing JVM, and library must be created for this mode. 32 bit JVM will not be able to execute or even load 64 bit library, and 64 JVM will not be able to do this with 64 bit library. This isn't only &quot;problem&quot; for JVM, the same is in .NET. You cannot mix 32 and 64 bits. So os.arch tells you exactly this what is interesting for you :-) If it returns x86 you know that you should use 32 bit library. For anything else you may try to use 64 bit, it will not work only if your CPU is other than x86 (or rather x86_64)."
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449069-cu6174021]-[-64881470]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"Exactly, os.arch returns this in which mode is CPU executing JVM, and library must be created for this mode. 32 bit JVM will not be able to execute or even load 64 bit library, and 64 JVM will not be able to do this with 64 bit library. This isn't only &quot;problem&quot; for JVM, the same is in .NET. You cannot mix 32 and 64 bits. So os.arch tells you exactly this what is interesting for you :-) If it returns x86 you know that you should use 32 bit library. For anything else you may try to use 64 bit, it will not work only if your CPU is other than x86 (or rather x86_64)."
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      {
                        "type":"QualifiedIdentifierNode",
                        "identifiers":[
                          {
                            "type":"IdentifierNode",
                            "name":"x86_64",
                            "comments":[
                              
                            ]
                          }
                        ],
                        "comments":[
                          
                        ]
                      }
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "jvm":4,
                        "bit":6,
                        "return":2,
                        "problem":1,
                        "load":1,
                        "librari":4,
                        "work":1,
                        "net":1,
                        "mix":1,
                        "interest":1,
                        "cpu":2,
                        "isn":1,
                        "arch":2,
                        "mode":2,
                        "quot":2,
                        "creat":1,
                        "tell":1,
                        "execut":2
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "creationDate":"2011-03-27",
      "lastActivityDate":"2011-03-27",
      "score":3,
      "isAccepted":true,
      "owner":{
        "type":"StackOverflowUser",
        "id":238264,
        "displayName":"przemelek",
        "reputation":66
      },
      "source":[
        {
          "type":"SourceInfo",
          "node":{
            "type":"XmlTextNode",
            "contents":"<p>Why unpredictable? You want only to detect if it is 32 bit system, and in this case it will be always x86 (of course for x86 processors), everything else means 64 bit.</p>"
          },
          "units":[
            {
              "type":"TextUnit",
              "id":"[5449069]-[2043029747]",
              "astNode":{
                "type":"TextFragmentNode",
                "text":"<p>Why unpredictable? You want only to detect if it is 32 bit system, and in this case it will be always x86 (of course for x86 processors), everything else means 64 bit.</p>"
              },
              "codeFragments":{
                "type":"CodeFragmentSequence",
                "fragments":[
                  
                ]
              },
              "metaInformation":[
                {
                  "type":"NaturalLanguageMetaInformation",
                  "tfMap":{
                    "bit":2,
                    "system":1,
                    "detect":1,
                    "unpredict":1,
                    "mean":1,
                    "processor":1
                  }
                },
                {
                  "type":"CodeTypesMetaInformation",
                  "qualifiedTypes":[
                    
                  ],
                  "simpleTypes":[
                    
                  ],
                  "basicTypes":[
                    
                  ]
                },
                {
                  "type":"CodeInvocationMetaInformation",
                  "invocations":[
                    
                  ]
                },
                {
                  "type":"CodeVariablesMetaInformation",
                  "variables":[
                    
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"SourceInfo",
          "node":{
            "type":"XmlTextNode",
            "contents":"<p>Problems starts if you know that your code may be executed also on PPC or other non x86 processors. But in this case you may use ugly hack with exception driven flow control, and use try {} catch () to &quot;detect&quot; such situations.</p>"
          },
          "units":[
            {
              "type":"TextUnit",
              "id":"[5449069]-[-1558081719]",
              "astNode":{
                "type":"TextFragmentNode",
                "text":"<p>Problems starts if you know that your code may be executed also on PPC or other non x86 processors. But in this case you may use ugly hack with exception driven flow control, and use try {} catch () to &quot;detect&quot; such situations.</p>"
              },
              "codeFragments":{
                "type":"CodeFragmentSequence",
                "fragments":[
                  {
                    "type":"JsonObjectNode",
                    "members":[
                      
                    ]
                  }
                ]
              },
              "metaInformation":[
                {
                  "type":"NaturalLanguageMetaInformation",
                  "tfMap":{
                    "detect":1,
                    "problem":1,
                    "code":1,
                    "driven":1,
                    "situat":1,
                    "processor":1,
                    "flow":1,
                    "ugli":1,
                    "quot":2,
                    "control":1,
                    "hack":1,
                    "start":1,
                    "ppc":1,
                    "execut":1
                  }
                },
                {
                  "type":"CodeTypesMetaInformation",
                  "qualifiedTypes":[
                    
                  ],
                  "simpleTypes":[
                    
                  ],
                  "basicTypes":[
                    
                  ]
                },
                {
                  "type":"CodeInvocationMetaInformation",
                  "invocations":[
                    
                  ]
                },
                {
                  "type":"CodeVariablesMetaInformation",
                  "variables":[
                    
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"SourceInfo",
          "node":{
            "type":"XmlTextNode",
            "contents":"<p>IMHO os.arch will be the best solution.</p>"
          },
          "units":[
            {
              "type":"TextUnit",
              "id":"[5449069]-[-1310837341]",
              "astNode":{
                "type":"TextFragmentNode",
                "text":"<p>IMHO os.arch will be the best solution.</p>"
              },
              "codeFragments":{
                "type":"CodeFragmentSequence",
                "fragments":[
                  
                ]
              },
              "metaInformation":[
                {
                  "type":"NaturalLanguageMetaInformation",
                  "tfMap":{
                    "arch":1,
                    "imho":1,
                    "solut":1
                  }
                },
                {
                  "type":"CodeTypesMetaInformation",
                  "qualifiedTypes":[
                    
                  ],
                  "simpleTypes":[
                    
                  ],
                  "basicTypes":[
                    
                  ]
                },
                {
                  "type":"CodeInvocationMetaInformation",
                  "invocations":[
                    
                  ]
                },
                {
                  "type":"CodeVariablesMetaInformation",
                  "variables":[
                    
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type":"StackOverflowAnswer",
      "id":5449361,
      "questionId":5449029,
      "comments":[
        {
          "type":"StackOverflowComment",
          "id":6174765,
          "postId":5449361,
          "creationDate":"2011-03-27",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":274473,
            "displayName":"kayahr",
            "reputation":4909
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"If you mean _sun.misc.Unsafe_ then this is a bad thing to use because other Java implementations don't provide it."
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449361-cu6174765]-[-647578309]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"If you mean _sun.misc.Unsafe_ then this is a bad thing to use because other Java implementations don't provide it."
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      {
                        "type":"IdentifierNode",
                        "name":"_sun",
                        "comments":[
                          
                        ]
                      }
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "provid":1,
                        "sun":1,
                        "bad":1,
                        "thing":1,
                        "implement":1,
                        "misc":1,
                        "unsaf":1
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"StackOverflowComment",
          "id":6174827,
          "postId":5449361,
          "creationDate":"2011-03-27",
          "score":0,
          "isEdited":false,
          "owner":{
            "type":"StackOverflowUser",
            "id":554431,
            "displayName":"bestsss",
            "reputation":6866
          },
          "source":[
            {
              "type":"SourceInfo",
              "node":{
                "type":"XmlTextNode",
                "contents":"@kayahr, odds to have the native libs working on that java versions w/o Unsafe is practically none."
              },
              "units":[
                {
                  "type":"TextUnit",
                  "id":"[5449361-cu6174827]-[-93533286]",
                  "astNode":{
                    "type":"TextFragmentNode",
                    "text":"@kayahr, odds to have the native libs working on that java versions w/o Unsafe is practically none."
                  },
                  "codeFragments":{
                    "type":"CodeFragmentSequence",
                    "fragments":[
                      
                    ]
                  },
                  "metaInformation":[
                    {
                      "type":"NaturalLanguageMetaInformation",
                      "tfMap":{
                        "odd":1,
                        "work":1,
                        "kayahr":1,
                        "version":1,
                        "lib":1,
                        "unsaf":1,
                        "practic":1
                      }
                    },
                    {
                      "type":"CodeTypesMetaInformation",
                      "qualifiedTypes":[
                        
                      ],
                      "simpleTypes":[
                        
                      ],
                      "basicTypes":[
                        
                      ]
                    },
                    {
                      "type":"CodeInvocationMetaInformation",
                      "invocations":[
                        
                      ]
                    },
                    {
                      "type":"CodeVariablesMetaInformation",
                      "variables":[
                        
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "creationDate":"2011-03-27",
      "lastActivityDate":"2011-03-27",
      "score":0,
      "isAccepted":false,
      "owner":{
        "type":"StackOverflowUser",
        "id":554431,
        "displayName":"bestsss",
        "reputation":6866
      },
      "source":[
        {
          "type":"SourceInfo",
          "node":{
            "type":"XmlTextNode",
            "contents":"<p><code>Unsafe.addressSize();</code></p>"
          },
          "units":[
            {
              "type":"TextUnit",
              "id":"[5449361]-[-1187146191]",
              "astNode":{
                "type":"TextFragmentNode",
                "text":"<p><code>Unsafe.addressSize();</code></p>"
              },
              "codeFragments":{
                "type":"CodeFragmentSequence",
                "fragments":[
                  {
                    "type":"MethodInvocationNode",
                    "qualifiedIdentifier":{
                      "type":"QualifiedIdentifierNode",
                      "identifiers":[
                        {
                          "type":"IdentifierNode",
                          "name":"Unsafe",
                          "comments":[
                            
                          ]
                        }
                      ],
                      "comments":[
                        
                      ]
                    },
                    "identifier":{
                      "type":"IdentifierNode",
                      "name":"addressSize",
                      "comments":[
                        
                      ]
                    },
                    "args":{
                      "type":"ExpressionListNode",
                      "arguments":[
                        
                      ],
                      "comments":[
                        
                      ]
                    },
                    "comments":[
                      
                    ]
                  }
                ]
              },
              "metaInformation":[
                {
                  "type":"NaturalLanguageMetaInformation",
                  "tfMap":{
                    "address":1,
                    "unsaf":1,
                    "size":1,
                    "code":2
                  }
                },
                {
                  "type":"CodeTypesMetaInformation",
                  "qualifiedTypes":[
                    
                  ],
                  "simpleTypes":[
                    
                  ],
                  "basicTypes":[
                    
                  ]
                },
                {
                  "type":"CodeInvocationMetaInformation",
                  "invocations":[
                    {
                      "type":"MethodInvocationNode",
                      "qualifiedIdentifier":{
                        "type":"QualifiedIdentifierNode",
                        "identifiers":[
                          {
                            "type":"IdentifierNode",
                            "name":"Unsafe",
                            "comments":[
                              
                            ]
                          }
                        ],
                        "comments":[
                          
                        ]
                      },
                      "identifier":{
                        "type":"IdentifierNode",
                        "name":"addressSize",
                        "comments":[
                          
                        ]
                      },
                      "args":{
                        "type":"ExpressionListNode",
                        "arguments":[
                          
                        ],
                        "comments":[
                          
                        ]
                      },
                      "comments":[
                        
                      ]
                    }
                  ]
                },
                {
                  "type":"CodeVariablesMetaInformation",
                  "variables":[
                    
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"SourceInfo",
          "node":{
            "type":"XmlTextNode",
            "contents":"<blockquote>\n <i>Report the size in bytes of a native pointer, as stored via {@link #putAddress}. This value will be either 4 or 8.</i>\n</blockquote>"
          },
          "units":[
            {
              "type":"TextUnit",
              "id":"[5449361]-[-1569453653]",
              "astNode":{
                "type":"TextFragmentNode",
                "text":"<blockquote>\n <i>Report the size in bytes of a native pointer, as stored via {@link #putAddress}. This value will be either 4 or 8.</i>\n</blockquote>"
              },
              "codeFragments":{
                "type":"CodeFragmentSequence",
                "fragments":[
                  {
                    "type":"QualifiedIdentifierNode",
                    "identifiers":[
                      {
                        "type":"IdentifierNode",
                        "name":"putAddress",
                        "comments":[
                          
                        ]
                      }
                    ],
                    "comments":[
                      
                    ]
                  }
                ]
              },
              "metaInformation":[
                {
                  "type":"NaturalLanguageMetaInformation",
                  "tfMap":{
                    "size":1,
                    "pointer":1,
                    "store":1,
                    "blockquot":2,
                    "link":1,
                    "address":1,
                    "put":1,
                    "report":1,
                    "byte":1
                  }
                },
                {
                  "type":"CodeTypesMetaInformation",
                  "qualifiedTypes":[
                    
                  ],
                  "simpleTypes":[
                    
                  ],
                  "basicTypes":[
                    
                  ]
                },
                {
                  "type":"CodeInvocationMetaInformation",
                  "invocations":[
                    
                  ]
                },
                {
                  "type":"CodeVariablesMetaInformation",
                  "variables":[
                    
                  ]
                }
              ]
            }
          ]
        },
        {
          "type":"SourceInfo",
          "node":{
            "type":"XmlTextNode",
            "contents":"<p>You can take it from here.</p>"
          },
          "units":[
            {
              "type":"TextUnit",
              "id":"[5449361]-[-1763275872]",
              "astNode":{
                "type":"TextFragmentNode",
                "text":"<p>You can take it from here.</p>"
              },
              "codeFragments":{
                "type":"CodeFragmentSequence",
                "fragments":[
                  
                ]
              },
              "metaInformation":[
                {
                  "type":"NaturalLanguageMetaInformation",
                  "tfMap":{
                    
                  }
                },
                {
                  "type":"CodeTypesMetaInformation",
                  "qualifiedTypes":[
                    
                  ],
                  "simpleTypes":[
                    
                  ],
                  "basicTypes":[
                    
                  ]
                },
                {
                  "type":"CodeInvocationMetaInformation",
                  "invocations":[
                    
                  ]
                },
                {
                  "type":"CodeVariablesMetaInformation",
                  "variables":[
                    
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}