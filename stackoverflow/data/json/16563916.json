{"type":"StackOverflowArtifact","question":{"type":"StackOverflowQuestion","id":16563916,"title":"Proguard issue while using GSON","comments":[{"type":"StackOverflowComment","id":23797692,"postId":16563916,"creationDate":"2013-05-15","score":0,"isEdited":false,"owner":{"type":"StackOverflowUser","id":550966,"displayName":"Pankaj Kumar","reputation":23835},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"this doesn't seems the proguard error..."},"units":[{"type":"TextUnit","id":"[16563916-cu23797692]-[-2121537992]","astNode":{"type":"TextFragmentNode","text":"this doesn't seems the proguard error..."},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"error":1,"proguard":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":78.87285714285716,"fleshKincaidGradeLevel":3.997142857142858,"automatedReadingIndex":3.6014285714285705,"gunningFogIndex":2.8000000000000003,"smogIndex":3.0,"colemanLiauIndex":6.84}]}]}]},{"type":"StackOverflowComment","id":23798414,"postId":16563916,"creationDate":"2013-05-15","score":0,"isEdited":false,"owner":{"type":"StackOverflowUser","id":2257394,"displayName":"Jithu","reputation":737},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"I tried it with out proguard, and it works well"},"units":[{"type":"TextUnit","id":"[16563916-cu23798414]-[-802807128]","astNode":{"type":"TextFragmentNode","text":"I tried it with out proguard, and it works well"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"work":1,"proguard":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Positive"},{"fleshReadingEaseScore":103.62500000000001,"fleshKincaidGradeLevel":1.2900000000000027,"automatedReadingIndex":0.9969999999999999,"gunningFogIndex":4.0,"smogIndex":3.0,"colemanLiauIndex":2.9929999999999986}]}]}]}],"tags":["android","json","gson"],"creationDate":"2013-05-15","lastActivityDate":"2013-05-15","score":4,"viewCount":2893,"owner":{"type":"StackOverflowUser","id":2257394,"displayName":"Jithu","reputation":737},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>I am using Gson in my application and for that, i am using some classes with name as same as the one in using Json. My application works well, But while writing proguard, application crashes, I guess some of the classes are shrinking. \nmy error is :</p>"},"units":[{"type":"TextUnit","id":"[16563916]-[-936249295]","astNode":{"type":"TextFragmentNode","text":"<p>I am using Gson in my application and for that, i am using some classes with name as same as the one in using Json. My application works well, But while writing proguard, application crashes, I guess some of the classes are shrinking. \nmy error is :</p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"proguard":1,"json":1,"crash":1,"gson":1,"work":1,"shrink":1,"error":1,"applic":3,"class":2,"guess":1,"write":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<blockquote>\n  <p>java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to com.sample.package.GsonClass</p>\n</blockquote>"},"units":[{"type":"TextUnit","id":"[16563916]-[-489543765]","astNode":{"type":"TextFragmentNode","text":"<blockquote>\n  <p>java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to com.sample.package.GsonClass</p>\n</blockquote>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"java","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"lang","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"ClassCastException","comments":[]},"comments":[]}],"comments":[]},{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"com","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"google","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"gson","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"internal","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"StringMap","comments":[]},"comments":[]}],"comments":[]},{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"GsonClass","comments":[]},"comments":[]}],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"googl":1,"map":1,"sampl":1,"gson":2,"blockquot":2,"cast":2,"lang":1,"intern":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"java","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"lang","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"ClassCastException","comments":[]},"comments":[]}],"comments":[]},{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"com","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"google","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"gson","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"internal","comments":[]},"comments":[]},{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"StringMap","comments":[]},"comments":[]}],"comments":[]}],"simpleTypes":[{"type":"ReferenceTypeNode","ids":[{"type":"ParameterizedTypeNode","identifier":{"type":"IdentifierNode","name":"GsonClass","comments":[]},"comments":[]}],"comments":[]}],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"gson","comments":[]},{"type":"IdentifierNode","name":"internal","comments":[]},{"type":"IdentifierNode","name":"java","comments":[]},{"type":"IdentifierNode","name":"StringMap","comments":[]},{"type":"IdentifierNode","name":"lang","comments":[]},{"type":"IdentifierNode","name":"GsonClass","comments":[]},{"type":"IdentifierNode","name":"ClassCastException","comments":[]},{"type":"IdentifierNode","name":"google","comments":[]},{"type":"IdentifierNode","name":"com","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]}]},"answers":[{"type":"StackOverflowAnswer","id":16564867,"questionId":16563916,"comments":[{"type":"StackOverflowComment","id":33614503,"postId":16564867,"creationDate":"2014-03-03","score":1,"isEdited":false,"owner":{"type":"StackOverflowUser","id":383414,"displayName":"Richard Le Mesurier","reputation":8189},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"here is the link to the head revision of that file: http://code.google.com/p/google-gson/source/browse/trunk/examples/android-proguard-example/proguard.cfg"},"units":[{"type":"TextUnit","id":"[16564867-cu33614503]-[-1668664327]","astNode":{"type":"TextFragmentNode","text":"here is the link to the head revision of that file: http://code.google.com/p/google-gson/source/browse/trunk/examples/android-proguard-example/proguard.cfg"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"proguard":2,"googl":2,"revis":1,"exampl":1,"head":1,"brows":1,"gson":1,"code":1,"cfg":1,"link":1,"file":1,"trunk":1,"http":1,"sourc":1,"android":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":-66.19499999999996,"fleshKincaidGradeLevel":25.47333333333334,"automatedReadingIndex":40.6975,"gunningFogIndex":8.133333333333335,"smogIndex":8.477225575051662,"colemanLiauIndex":51.88916666666667}]}]}]},{"type":"StackOverflowComment","id":35825192,"postId":16564867,"creationDate":"2014-04-30","score":0,"isEdited":false,"owner":{"type":"StackOverflowUser","id":1343232,"displayName":"umesh","reputation":585},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"-keep class com.google.gson.examples.android.model.** { *; } it works for me but when i applied reverse engg on apk, i got all the model classes with not change in members, it breaks the security purpose, isn't there any other option, we can obfuscate model too ?"},"units":[{"type":"TextUnit","id":"[16564867-cu35825192]-[-858188999]","astNode":{"type":"TextFragmentNode","text":"-keep class com.google.gson.examples.android.model.** { *; } it works for me but when i applied reverse engg on apk, i got all the model classes with not change in members, it breaks the security purpose, isn't there any other option, we can obfuscate model too ?"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"com","comments":[]},"labels":[],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"chang":1,"break":1,"googl":1,"revers":1,"model":3,"exampl":1,"apk":1,"option":1,"secur":1,"gson":1,"work":1,"obfusc":1,"member":1,"isn":1,"class":1,"appli":1,"engg":1,"purpos":1,"android":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"com","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":50.562857142857155,"fleshKincaidGradeLevel":11.423809523809528,"automatedReadingIndex":12.17142857142857,"gunningFogIndex":10.304761904761905,"smogIndex":8.477225575051662,"colemanLiauIndex":11.660476190476189}]}]}]},{"type":"StackOverflowComment","id":35923825,"postId":16564867,"creationDate":"2014-05-02","score":1,"isEdited":false,"owner":{"type":"StackOverflowUser","id":1132647,"displayName":"Matt Accola","reputation":1420},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"I also had to add `-keepattributes *Annotation*`"},"units":[{"type":"TextUnit","id":"[16564867-cu35923825]-[-1535264027]","astNode":{"type":"TextFragmentNode","text":"I also had to add `-keepattributes *Annotation*`"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"annot":1,"keepattribut":1,"add":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[]},{"declarators":[]},{"averageLevel":"Neutral"},{"fleshReadingEaseScore":42.61571428571432,"fleshKincaidGradeLevel":9.054285714285715,"automatedReadingIndex":6.965714285714284,"gunningFogIndex":8.514285714285714,"smogIndex":8.477225575051662,"colemanLiauIndex":11.047142857142855}]}]}]}],"creationDate":"2013-05-15","lastActivityDate":"2013-05-15","score":8,"isAccepted":true,"owner":{"type":"StackOverflowUser","id":1051147,"displayName":"TCA","reputation":5166},"source":[{"type":"SourceInfo","node":{"type":"XmlTextNode","contents":"<p>You need to add these lines to your proguard so that gson class is kept while signing your app.. </p>"},"units":[{"type":"TextUnit","id":"[16564867]-[-1386988084]","astNode":{"type":"TextFragmentNode","text":"<p>You need to add these lines to your proguard so that gson class is kept while signing your app.. </p>"},"codeFragments":{"type":"CodeFragmentSequence","fragments":[{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"is","comments":[]},"labels":[],"comments":[]}]},"metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"proguard":1,"line":1,"gson":1,"sign":1,"app":1,"add":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"is","comments":[]}]},{"declarators":[]},{"averageLevel":"Negative"},{"fleshReadingEaseScore":121.2,"fleshKincaidGradeLevel":-3.4,"automatedReadingIndex":-16.1,"gunningFogIndex":0.4,"smogIndex":3.0,"colemanLiauIndex":-39.8}]}]},{"type":"SourceInfo","node":{"type":"XmlNode","name":{"type":"XmlNameNode","value":"pre"},"attributes":[],"elements":[{"type":"XmlNode","name":{"type":"XmlNameNode","value":"code"},"attributes":[],"elements":[{"type":"XmlTextNode","contents":"##---------------Begin: proguard configuration for Gson  ----------\n# Gson uses generic type information stored in a class file when working with fields. Proguard\n# removes such information by default, so configure it to keep all of it.\n-keepattributes Signature\n\n\n# Gson specific classes\n-keep class sun.misc.Unsafe { *; }\n#-keep class com.google.gson.stream.** { *; }\n\n# Application classes that will be serialized/deserialized over Gson\n-keep class com.google.gson.examples.android.model.** { *; }\n\n##---------------End: proguard configuration for Gson  ----------\n"}]}]},"units":[{"type":"StructuredFragmentUnit","id":"[16564867]-[-1649513701]","astNode":{"type":"CodeFragmentSequence","fragments":[{"type":"TextFragmentNode","text":"##---------------Begin: proguard configuration for Gson  ----------\n# Gson uses generic type information stored in a "},{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"file","comments":[]},"labels":[],"comments":[]},{"type":"TextFragmentNode","text":"when working with fields. Proguard\n# removes such information by default, so configure it to keep all of it.\n-keepattributes Signature\n\n\n# Gson specific classes\n-keep "},{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"sun","comments":[]},"labels":[],"comments":[]},{"type":"TextFragmentNode","text":".misc.Unsafe { *; }\n#-keep "},{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"com","comments":[]},"labels":[],"comments":[]},{"type":"TextFragmentNode","text":".google.gson.stream.** { *; }\n\n# Application classes that will be serialized/deserialized over Gson\n-keep "},{"type":"ClassDeclarationNode","modifiers":[],"identifier":{"type":"IdentifierNode","name":"com","comments":[]},"labels":[],"comments":[]},{"type":"TextFragmentNode","text":".google.gson.examples.android.model.** { *; }\n\n##---------------End: proguard configuration for Gson  ----------\n"}]},"rawText":"##---------------Begin: proguard configuration for Gson  ----------\n# Gson uses generic type information stored in a class file when working with fields. Proguard\n# removes such information by default, so configure it to keep all of it.\n-keepattributes Signature\n\n\n# Gson specific classes\n-keep class sun.misc.Unsafe { *; }\n#-keep class com.google.gson.stream.** { *; }\n\n# Application classes that will be serialized/deserialized over Gson\n-keep class com.google.gson.examples.android.model.** { *; }\n\n##---------------End: proguard configuration for Gson  ----------\n","metaInformation":[{"type":"NaturalLanguageMetaInformation","tfMap":{"serial":1,"begin":1,"remov":1,"proguard":3,"googl":2,"field":1,"model":1,"signatur":1,"exampl":1,"keepattribut":1,"sun":1,"store":1,"configur":3,"gson":7,"work":1,"generic":1,"inform":2,"stream":1,"specif":1,"applic":1,"misc":1,"end":1,"class":2,"file":1,"unsaf":1,"deseri":1,"type":1,"android":1}},{"type":"CodeTypesMetaInformation","qualifiedTypes":[],"simpleTypes":[],"basicTypes":[]},{"type":"CodeInvocationMetaInformation","invocations":[]},{"type":"CodeVariablesMetaInformation","variables":[]},{"identifiers":[{"type":"IdentifierNode","name":"file","comments":[]},{"type":"IdentifierNode","name":"sun","comments":[]},{"type":"IdentifierNode","name":"com","comments":[]}]},{"declarators":[]},{"grade":0.10006112605333328}]}]}]}]}