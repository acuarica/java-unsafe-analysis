
\section{Methodology} \label{sec:methodology}

In this section we describe our methodology to retrieve the data we used for our analysis.
We begin describing how we mined BOA repositories and then how we analysed the Stackoverflow database.

The complete scripts and results are available online~\footnote{\url{https://bitbucket.org/acuarica/java-unsafe-analysis}}.

\subsection{BOA repositories}

We searched for Boa \cite{Dyer-Nguyen-Rajan-Nguyen-13}

 discouraged. 

Our Boa script starts 

It is possible to group methods in \smu{} by functionality.
Table \ref{table:groups} shows all methods (without overloads) grouped by functionality.

\input{table-groups}


\subsubsection*{Reflection}

%\begin{verbatim}
%Class<?> unsafeClass = Class.forName("sun.misc.Unsafe");
%Field unsafeField = unsafeClass.getDeclaredField("theUnsafe");
%unsafeField.setAccessible(true);
%Object unsafe = unsafeField.get(null);
%int addressSize = ((Number) %unsafeClass.getMethod("addressSize").invoke(unsafe)).intValue();
%\end{verbatim}

What happens with other uses such as reflection? It is not detected but it uses Unsafe. There should be a way to measure this kind of use.

Look for problematic uses of the API, and some use patterns.



\subsection{Stackoverflow}

Google search for sun.misc.unsafe site:stackoverflow.com
returns about 1,360 results.
